{
  "hash": "37839ec943650bd94e67e4c94e0d8d5b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data Wrangling with tidyverse\"\ndescription: \"Reading for Class 03\"\nauthor: \n  - name: Lindsay Hayes\n    url: https://lindsaynhayes.github.io\n    affiliation: Department of Cell Biology, OUHSC\ndate: 2025-07-08\ndraft: false\neditor_options: \n  chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n\n::: callout-note\n### Learning objectives\n\n**At the end of this lesson you will be able to:**\n\n-   Reconize and define an untidy dataset\n-   Recognize and convert between long and wide data set formats\n-   Understand when to use both formats\n-   Pipe functions together to perform multiple commands in sequence\n:::\n\n## The problem with messy data\nMost scientists are **not** trained to collect and organize data using `tidydata` principles. The results are data sets which are hard to follow, difficult to repeat, and challenging to report to journals. Understanding how to collect, organize, and store your data and analyses will make your life easier! Moreover, many journals request raw data submissions along with your manuscript. If you've analyzed and organized all your data in `R` using `tidydata` principles this process becomes a super simple, rather than tracking all the data across messy spreadsheets.\n\n> \"Tidy datasets are all alike, but every messy dataset is messy in its own way.\"\\\n> --- Hadley Wickham\n\n## The principles of `tidydata`\n\n1.  **Treat your raw data as immutable.**\n\n*Try to manipulate the original form of the data as little as possible. The reason is to make the whole data analysis pipeline reproducible and transparent. If you start changing fields on the data spreadsheet you can't track where those values came from. Manipulating data with code also decreases the chances for errors being introduced to the raw data.*\n\n2.  **Each variable is a column; each column is a variable.**\n\n3.  **Each observation is a row; each row is an observation.**\n\n4.  **Each value is a cell; each cell is a single value.**\n\nFor example, take the following data\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n      groups val\n1   Con_male  56\n2 CON_female  61\n3      Exp_m  75\n4      Exp_F  86\n```\n\n\n:::\n:::\n\n\n**Why might this data be a problem?** \n\n- combining 2 observations into one field (group and sex). \n- changing the notation styles\n\nHere's another example\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n  groups      val2\n1    CON 144_ug/ul\n2    CON  63_ug/ul\n3    EXP  96_ug/ul\n4    EXP  84_ug/ul\n```\n\n\n:::\n:::\n\n\n**Why might this data be a problem? **\n\n- the data field contains 2 values the numeric value and the units\n\nThe second step after getting your data into R will be **data wrangling** in order to modify the data so that you can perform an analysis. Luckily R has a whole suite of tools to makes this process easy and most importantly reproducible. This less will teach you practices for effective data wrangling.\n\n\n## The Tidyverse\n\n<img src=\"figs/tidy_hex.png\" width=\"50%\" style=\"float:right\"/>\n\n\nThe [Tidyverse](https://www.tidyverse.org) which is a collection of R packages that share an underlying design, syntax, and grammer to streamline many main functions used in data science. You can install the complete tidyverse with `install.packages(\"tidyverse\")`, once the package is installed you can load it using `library(tidyverse)`.\n\nThe packages installed in tidyverse include:\n\n-   `dplyr` and `tidyr` are packages for data manipulation to subset, re-arrange, and format your dataset.\n-   `tibble` is a tidy way of displaying data frames that are easier to view.\n-   `readr` is a tidy way to input or read in data into R.\n-   `purrr` is a functional programming toolkit to handle looping functions.\n-   `stringr` is a way of handling text and character strings.\n-   `forcats` is a package providing tools to handle categorical variables and discrete (non-continuous) variables.\n-   `lubridate` is a package for working with times and dates.\n-   `ggplot2` is a graphic package to plot your data.\n\n::: callout-important\nThere are nice [cheatsheets](https://posit.co/resources/cheatsheets/) for each of the packages to demonstrate what they do in detail!\n\nDon't forget to check out the *Help* section too!\n:::\n\n## The BIG picture\n\nWe have now progressed to the Tidy part of the data analysis pipeline!\n\n<img src=\"figs/tidy.png\" width=\"90%\" style=\"display:block; margin-left: auto; margin-right: auto\"/>\n\n<figcaption>Figure 1: In our model of the data science process, you start with data import and tidying. Next, you understand your data with an iterative cycle of transforming, visualizing, and modeling. You finish the process by communicating your results to other humans.</figcaption>\n\n## Some not so tidy data\n\nHave you seen or even generated data that looks like this?\n\n#### example 1\n::: {.img-float}\n<img src=\"figs/untidy1.png\" width=\"90%\" style=\"float:center\"/>\n:::\n\n#### example 2\n::: {.img-float}\n<img src=\"figs/untidy2.png\" width=\"90%\" style=\"float:center\"/>\n:::\n\n#### example 3\n::: {.img-float}\n<img src=\"figs/untidy3.png\" width=\"90%\" style=\"float:center\"/>\n:::\n\n## Tidy data with `tidyr`\n\nThe next step it to tidy and transform the data into a format that R can use to perform visualization and analysis.\n\n::: callout-important\n### Remember your pipes!\n`%>%` & `|>` \n:::\n\n### Wide vs Long data\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyr)\nlibrary(palmerpenguins)\n\n\n# pivot_longer\n# pivot_wider\n```\n:::\n\nhttps://www.youtube.com/watch?v=MKwyauo8nSI\n\nhttps://posit.co/resources/videos/data-wrangling-with-r-and-rstudio/\n\n\n\n### unite vs separate\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyr)\nlibrary(palmerpenguins)\n\n\n# unite\n# separate_wider_delim\n# separate_longer_delim\n# unnest_longer(films)\n```\n:::\n\n\n\n### dealing with missing values\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyr)\nlibrary(palmerpenguins)\n\n# drop_na\n# replace_na\n```\n:::\n\n\n\n\n\n\n\n## Transform data with `dplyr`\n<img src=\"figs/tidy2.png\" width=\"90%\" style=\"display:block; margin-left: auto; margin-right: auto\"/>\n\n### Summarize\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\n# summarize\n# count\n# group_by\n# filter\n# distinct same as unique\n# slice\n# arrange\n# select\n# mutate\n### n()\n### sum()\n### mean(), median(), min(), max()\n### IQR(), sd(), var(),\n\n# rename\n\n# bind_cols\n# bind_rows\n```\n:::\n",
    "supporting": [
      "index_R03_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}